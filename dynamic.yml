http:
  routers:
    txms-router-http:
      rule: "Host(`${DOMAIN_NAME}`)"
      service: txms-service
      entryPoints:
        - web
      middlewares:
        - redirect-to-https

    txms-router:
      rule: "Host(`${DOMAIN_NAME}`)"
      service: txms-service
      entryPoints:
        - websecure
      tls:
        certResolver: myresolver

    acme-http:
      rule: "PathPrefix(`/.well-known/acme-challenge/`)"
      entryPoints:
        - web
      service: acme-service

    traefik:
      rule: "Host(`traefik.txms.info`)"
      service: api@internal
      entryPoints:
        - traefik

  services:
    txms-service:
      loadBalancer:
        servers:
          - url: "http://localhost:8080"

    acme-service:
      loadBalancer:
        servers:
          - url: "http://127.0.0.1:8080"

  middlewares:
    redirect-to-https:
      redirectScheme:
        scheme: https
